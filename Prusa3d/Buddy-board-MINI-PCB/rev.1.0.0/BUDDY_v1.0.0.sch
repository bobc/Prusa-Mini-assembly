EESchema Schematic File Version 4
LIBS:BUDDY_v1.0.0-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 14
Title "Buddy"
Date "2019-10-24"
Rev "v1.0.0"
Comp "PRUSA Research s.r.o."
Comment1 "http://creativecommons.org/licenses/by-sa/4.0/"
Comment2 "Licensed under the Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)"
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 10110 1820 895  850 
U 5C7CC220
F0 "FANS" 50
F1 "fans.sch" 50
F2 "FAN-0-5V" I L 10110 1900 50 
F3 "FAN-1-5V" I L 10110 2000 50 
F4 "FAN-0-TACH" O L 10110 2100 50 
F5 "FAN-1-TACH" O L 10110 2200 50 
$EndSheet
$Sheet
S 10115 780  895  860 
U 5C838825
F0 "THERMISTORS" 50
F1 "thermistors.sch" 50
F2 "THERM-0" O L 10115 900 50 
F3 "THERM-1" O L 10115 1000 50 
F4 "THERM-2" O L 10115 1100 50 
$EndSheet
Wire Wire Line
	1650 4090 1595 4090
Text GLabel 1650 4190 2    50   Output ~ 0
BED-HEAT-5V
Text GLabel 1650 4090 2    50   Output ~ 0
HEAT-0-5V
Text GLabel 1655 2860 2    50   Input ~ 0
HEAT-0-5V
Text GLabel 1655 2960 2    50   Input ~ 0
BED-HEAT-5V
Wire Wire Line
	1655 2960 1600 2960
Wire Wire Line
	1655 2860 1600 2860
Text GLabel 1650 4290 2    50   Output ~ 0
FAN-0-5V
Text GLabel 1650 4390 2    50   Output ~ 0
FAN-1-5V
Text GLabel 10055 1900 0    50   Input ~ 0
FAN-0-5V
Text GLabel 10055 2000 0    50   Input ~ 0
FAN-1-5V
Wire Wire Line
	10055 2000 10110 2000
$Sheet
S 5305 6190 895  780 
U 5CCBB955
F0 "POWER" 50
F1 "power.sch" 50
F2 "BED_MON" O R 6200 6300 50 
$EndSheet
$Sheet
S 720  655  865  1940
U 5D03975D
F0 "PERIPHERALS" 50
F1 "periphrals.sch" 50
F2 "THERM-PINDA" O R 1585 800 50 
F3 "Z-MIN" O R 1585 900 50 
F4 "LCD-CS" I R 1585 1000 50 
F5 "FILAMENT_SENSOR" O R 1585 1500 50 
F6 "LCD-RST" O R 1585 1100 50 
F7 "LCD-SW1" O R 1585 1200 50 
F8 "LCD-SW2" O R 1585 1300 50 
F9 "LCD-SW3" O R 1585 1400 50 
F10 "LCD-RS" O R 1585 1600 50 
F11 "SCK2" I R 1585 1800 50 
F12 "MOSI2" I R 1585 1700 50 
F13 "NRST" O R 1585 2000 50 
F14 "MISO2" I R 1585 1900 50 
F15 "ESP-Rx" I R 1585 2200 50 
F16 "ESP-Tx" O R 1585 2300 50 
F17 "ESP-RST" I R 1585 2400 50 
F18 "ESP-GPIO0" I R 1585 2100 50 
F19 "LCD-BUZZER" I R 1585 2500 50 
$EndSheet
$Sheet
S 685  3470 910  1030
U 5CDCB3CD
F0 "LEVEL_CONVERTER" 50
F1 "level_converter.sch" 50
F2 "HEAT-0" I R 1595 3590 50 
F3 "FAN-0" I R 1595 3790 50 
F4 "FAN-1" I R 1595 3890 50 
F5 "BED-HEAT" I R 1595 3690 50 
F6 "HEAT-0-5V" O R 1595 4090 50 
F7 "FAN-0-5V" O R 1595 4290 50 
F8 "FAN-1-5V" O R 1595 4390 50 
F9 "BED-HEAT-5V" O R 1595 4190 50 
$EndSheet
Wire Wire Line
	1595 4190 1650 4190
Wire Wire Line
	1595 4290 1650 4290
Wire Wire Line
	1595 4390 1650 4390
Wire Wire Line
	10110 1900 10055 1900
Wire Wire Line
	8275 1900 8275 2100
Wire Wire Line
	8275 2100 10110 2100
Wire Wire Line
	8180 2000 8180 2200
Wire Wire Line
	8180 2200 10110 2200
$Sheet
S 700  4720 865  2515
U 5C471068
F0 "Trinamic driver" 50
F1 "trinamic.sch" 50
F2 "X-Step" I R 1565 5600 50 
F3 "X-DIR" I R 1565 5700 50 
F4 "X-EN" I R 1565 5800 50 
F5 "X-Diag" I R 1565 5900 50 
F6 "Y-Step" I R 1565 6000 50 
F7 "Y-DIR" I R 1565 6100 50 
F8 "Y-EN" I R 1565 6200 50 
F9 "Y-Diag" I R 1565 6300 50 
F10 "Z-Step" I R 1565 4800 50 
F11 "Z-DIR" I R 1565 4900 50 
F12 "Z-EN" I R 1565 5000 50 
F13 "Z-Diag" I R 1565 5100 50 
F14 "MOT-UART" I R 1565 6400 50 
F15 "E-Step" I R 1565 5200 50 
F16 "E-DIR" I R 1565 5300 50 
F17 "E-EN" I R 1565 5400 50 
F18 "E-Diag" I R 1565 5500 50 
$EndSheet
Wire Wire Line
	1595 3590 1795 3590
Wire Wire Line
	1595 3690 1885 3690
Wire Wire Line
	1595 3790 1970 3790
Wire Wire Line
	1595 3890 2060 3890
Wire Wire Line
	4100 1200 4100 800 
Wire Wire Line
	4000 1300 4000 900 
Wire Wire Line
	3900 1400 3900 1000
Wire Wire Line
	3800 1500 3800 1100
Wire Wire Line
	3700 1600 3700 1200
Wire Wire Line
	3600 1700 3600 1300
Wire Wire Line
	3500 1800 3500 1400
Wire Wire Line
	3400 1900 3400 1500
Wire Wire Line
	1585 800  4100 800 
Wire Wire Line
	1585 900  4000 900 
Wire Wire Line
	1585 1000 3900 1000
Wire Wire Line
	1585 1100 3800 1100
Wire Wire Line
	1585 1200 3700 1200
Wire Wire Line
	1585 1300 3600 1300
Wire Wire Line
	1585 1400 3500 1400
Wire Wire Line
	1585 1500 3400 1500
Wire Wire Line
	4100 1200 4615 1200
Wire Wire Line
	4000 1300 4615 1300
Wire Wire Line
	3900 1400 4615 1400
Wire Wire Line
	3800 1500 4615 1500
Wire Wire Line
	3700 1600 4615 1600
Wire Wire Line
	3600 1700 4615 1700
Wire Wire Line
	3500 1800 4615 1800
Wire Wire Line
	3400 1900 4615 1900
Wire Wire Line
	9700 3755 10130 3755
Wire Wire Line
	9600 3855 10130 3855
Wire Wire Line
	9500 3955 10130 3955
Wire Wire Line
	9400 4055 10130 4055
Wire Wire Line
	9300 4155 10130 4155
Wire Wire Line
	9200 4255 10130 4255
Wire Wire Line
	9100 4355 10130 4355
Wire Wire Line
	9000 4455 10130 4455
Wire Wire Line
	8900 4555 10130 4555
Wire Wire Line
	8800 4655 10130 4655
Text Notes 5580 3295 0    59   ~ 0
STM32F407VGT6
Wire Wire Line
	7200 1900 8275 1900
Wire Wire Line
	7200 2000 8180 2000
Wire Wire Line
	7200 3400 9700 3400
Wire Wire Line
	7200 3500 9600 3500
Wire Wire Line
	7200 3600 9500 3600
Wire Wire Line
	7200 3700 9400 3700
Wire Wire Line
	7200 3800 9300 3800
Wire Wire Line
	7200 3900 9200 3900
Wire Wire Line
	7200 4000 9100 4000
Wire Wire Line
	7200 4100 9000 4100
Wire Wire Line
	7200 4200 8900 4200
Wire Wire Line
	7200 4300 8800 4300
Wire Wire Line
	8300 900  8300 1200
Wire Wire Line
	8300 1200 7200 1200
Wire Wire Line
	8400 1000 8400 1300
Wire Wire Line
	8400 1300 7200 1300
Wire Wire Line
	8300 900  10115 900 
Wire Wire Line
	8400 1000 10115 1000
$Sheet
S 10130 2830 870  475 
U 5C86CD9C
F0 "EEPROM" 50
F1 "eeprom.sch" 50
F2 "SCL" I L 10130 3000 50 
F3 "SDA" I L 10130 3100 50 
$EndSheet
Wire Wire Line
	7200 2500 8100 2500
Wire Wire Line
	8100 2500 8100 3000
Wire Wire Line
	7200 2600 8000 2600
Wire Wire Line
	8000 2600 8000 3100
Wire Wire Line
	8100 3000 10130 3000
Wire Wire Line
	8000 3100 10130 3100
Wire Wire Line
	1565 4800 2300 4800
Wire Wire Line
	1565 4900 2400 4900
Wire Wire Line
	1565 5000 2500 5000
Wire Wire Line
	1565 5100 2600 5100
Wire Wire Line
	1565 5200 2700 5200
Wire Wire Line
	1565 5300 2800 5300
Wire Wire Line
	1565 5400 2900 5400
Wire Wire Line
	1565 5500 3000 5500
Wire Wire Line
	1565 5600 3100 5600
Wire Wire Line
	1565 5700 3200 5700
Wire Wire Line
	1565 5800 3300 5800
Wire Wire Line
	1565 5900 3400 5900
Wire Wire Line
	1565 6000 3500 6000
Wire Wire Line
	1565 6100 3600 6100
Wire Wire Line
	1565 6200 3700 6200
Wire Wire Line
	1565 6300 3800 6300
Wire Wire Line
	1565 6400 3900 6400
Wire Wire Line
	2060 3400 4615 3400
Wire Wire Line
	3900 5200 4615 5200
Wire Wire Line
	3300 1600 3300 2000
Wire Wire Line
	3300 2000 4615 2000
Wire Wire Line
	1585 1600 3300 1600
$Sheet
S 10130 3500 875  1275
U 5CD79E15
F0 "ETHERNET" 50
F1 "ethernet.sch" 50
F2 "ETH_RMII_TXD0" I L 10130 3755 50 
F3 "ETH_RMII_TXD1" I L 10130 3855 50 
F4 "ETH_RMII_TX_EN" I L 10130 3955 50 
F5 "ETH_RMII_RXD0" O L 10130 4055 50 
F6 "ETH_RMII_RXD1" O L 10130 4155 50 
F7 "ETH_RMII_MDC" I L 10130 4255 50 
F8 "ETH_RMII_MDIO" B L 10130 4355 50 
F9 "ETH_RMII_CRS_DV" O L 10130 4455 50 
F10 "EPHY_RST" I L 10130 4555 50 
F11 "ETH_RMII_REF_CLK" I L 10130 4655 50 
$EndSheet
Wire Wire Line
	9700 3400 9700 3755
Wire Wire Line
	9600 3500 9600 3855
Wire Wire Line
	9500 3600 9500 3955
Wire Wire Line
	9400 3700 9400 4055
Wire Wire Line
	9300 3800 9300 4155
Wire Wire Line
	9200 3900 9200 4255
Wire Wire Line
	9100 4000 9100 4355
Wire Wire Line
	9000 4100 9000 4455
Wire Wire Line
	8900 4200 8900 4555
Wire Wire Line
	8800 4300 8800 4655
Wire Wire Line
	8300 5400 8300 5000
Wire Wire Line
	7200 5000 8300 5000
Wire Wire Line
	8200 5500 8200 5100
Wire Wire Line
	7200 5100 8200 5100
Wire Wire Line
	8100 5600 8100 5200
Wire Wire Line
	8100 5200 7200 5200
Wire Wire Line
	8000 5700 8000 5300
Wire Wire Line
	8000 5300 7200 5300
$Sheet
S 10125 4935 990  1285
U 5CD3F2A3
F0 "USB" 50
F1 "usb.sch" 50
F2 "USB-FS-ID" O L 10125 5400 50 
F3 "USB-FS-VBUS" O L 10125 5500 50 
F4 "USB-HS-PWR-EN" I L 10125 5600 50 
F5 "USB-HS-OVERCURRENT" O L 10125 5700 50 
$EndSheet
Wire Wire Line
	8300 5400 10125 5400
Wire Wire Line
	8200 5500 10125 5500
Wire Wire Line
	8100 5600 10125 5600
Wire Wire Line
	8000 5700 10125 5700
Wire Wire Line
	3200 2100 3200 1700
Wire Wire Line
	3100 2200 3100 1800
Wire Wire Line
	3200 2100 4615 2100
Wire Wire Line
	3100 2200 4615 2200
Wire Wire Line
	1585 1700 3200 1700
Wire Wire Line
	1585 1800 3100 1800
$Sheet
S 4615 1100 2585 4700
U 5D03F01C
F0 "CPU" 79
F1 "cpu.sch" 79
F2 "PE11_FAN-0" O L 4615 3300 50 
F3 "PE9_FAN-1" O L 4615 3400 50 
F4 "PA8_Z-MIN" I L 4615 1300 50 
F5 "PB9_SDA" B R 7200 2600 50 
F6 "PB8_SCL" O R 7200 2500 50 
F7 "PB12_ETH_RMII_TXD0" O R 7200 3400 50 
F8 "PB13_ETH_RMII_TXD1" O R 7200 3500 50 
F9 "PB11_ETH_RMII_TX_EN" O R 7200 3600 50 
F10 "PC4_ETH_RMII_RXD0" O R 7200 3700 50 
F11 "PC5_ETH_RMII_RXD1" O R 7200 3800 50 
F12 "PC1_ETH_RMII_MDC" O R 7200 3900 50 
F13 "PA2_ETH_RMII_MDIO" O R 7200 4000 50 
F14 "PA7_ETH_RMII_CRS_DV" O R 7200 4100 50 
F15 "PA1_ETH_RMII_REF_CLK" O R 7200 4300 50 
F16 "PA9_USB-FS-VBUS" I R 7200 5100 50 
F17 "PC2_MISO2" I L 4615 2300 50 
F18 "PC3_MOSI2" O L 4615 2100 50 
F19 "PB10_SCK2" O L 4615 2200 50 
F20 "PE14_FAN-1-TACH" I R 7200 2000 50 
F21 "PB0_BED-HEAT" O L 4615 3200 50 
F22 "PB1_HEAT-0" O L 4615 3100 50 
F23 "PD5_MOT-UART" B L 4615 5200 50 
F24 "PD15_Z-DIR" O L 4615 3700 50 
F25 "PE4_USB-HS-OVERCURRENT" I R 7200 5300 50 
F26 "PE5_USB-HS-PWR-EN" O R 7200 5200 50 
F27 "PA10_USB-FS-ID" I R 7200 5000 50 
F28 "PA6_THERM-PINDA" I L 4615 1200 50 
F29 "PE10_FAN-0-TACH" I R 7200 1900 50 
F30 "PC9_LCD-CS" O L 4615 1400 50 
F31 "PE15_LCD-SW2" I L 4615 1700 50 
F32 "PE13_LCD-SW3" I L 4615 1800 50 
F33 "PC8_LCD-RST" O L 4615 1500 50 
F34 "PE8_EPHY_RST" O R 7200 4200 50 
F35 "NRST" I L 4615 2400 50 
F36 "PD7_FLASH-CSN" O L 4615 5400 50 
F37 "PC11_MISO" I L 4615 5500 50 
F38 "PC12_MOSI" O L 4615 5600 50 
F39 "PC10_SCK" O L 4615 5700 50 
F40 "PA0_BUZZER" O L 4615 2900 50 
F41 "PE12_LCD-SW1" I L 4615 1600 50 
F42 "PD11_LCD-RS" O L 4615 2000 50 
F43 "PC6_ESP-Rx" O L 4615 2600 50 
F44 "PC7_ESP-Tx" I L 4615 2700 50 
F45 "PE6_ESP-GPIO0" O L 4615 2500 50 
F46 "PD1_X-STEP" O L 4615 4400 50 
F47 "PD4_Z-STEP" O L 4615 3600 50 
F48 "PD0_X-DIR" O L 4615 4500 50 
F49 "PD2_Z-EN" O L 4615 3800 50 
F50 "PD3_X-EN" O L 4615 4600 50 
F51 "PE3_Z-Diag" I L 4615 3900 50 
F52 "PE2_X-Diag" I L 4615 4700 50 
F53 "PD9_E0-STEP" O L 4615 4000 50 
F54 "PD13_Y-STEP" O L 4615 4800 50 
F55 "PD12_Y-DIR" O L 4615 4900 50 
F56 "PD8_E0-DIR" O L 4615 4100 50 
F57 "PA15_E0-Diag" I L 4615 4300 50 
F58 "PE1_Y-Diag" I L 4615 5100 50 
F59 "PD10_E0-EN" O L 4615 4200 50 
F60 "PD14_Y-EN" O L 4615 5000 50 
F61 "PC13_ESP-RST" O L 4615 2800 50 
F62 "PB4_FILAMENT_SENSOR" I L 4615 1900 50 
F63 "PC0_THERM-0" I R 7200 1200 50 
F64 "PA4_THERM-1" I R 7200 1300 50 
F65 "PA5_THERM-2" I R 7200 1400 50 
F66 "PA3_BED_MON" I R 7200 5700 50 
$EndSheet
Wire Wire Line
	2900 2400 2900 2000
Wire Wire Line
	1585 2000 2900 2000
Wire Wire Line
	2900 2400 4615 2400
$Sheet
S 2165 6790 925  770 
U 5CDB2E57
F0 "FLASH" 50
F1 "flash.sch" 50
F2 "SCK" I R 3090 7200 50 
F3 "MISO" I R 3090 7000 50 
F4 "MOSI" I R 3090 7100 50 
F5 "FLASH-CSN" I R 3090 6900 50 
$EndSheet
Wire Wire Line
	3090 6900 4100 6900
Wire Wire Line
	3090 7000 4200 7000
Wire Wire Line
	3090 7100 4300 7100
Wire Wire Line
	3090 7200 4400 7200
Wire Wire Line
	4400 5700 4615 5700
Wire Wire Line
	3000 1900 3000 2300
Wire Wire Line
	3000 2300 4615 2300
Wire Wire Line
	1585 1900 3000 1900
$Sheet
S 710  2770 890  540 
U 5CDD551D
F0 "MOSFETS" 50
F1 "mosfets.sch" 50
F2 "HEAT-0-5V" I R 1600 2860 50 
F3 "BED-HEAT-5V" I R 1600 2960 50 
$EndSheet
Wire Wire Line
	2800 2100 2800 2500
Wire Wire Line
	2700 2200 2700 2600
Wire Wire Line
	2600 2300 2600 2700
Wire Wire Line
	2500 2400 2500 2800
Wire Wire Line
	2800 2500 4615 2500
Wire Wire Line
	2700 2600 4615 2600
Wire Wire Line
	2600 2700 4615 2700
Wire Wire Line
	2500 2800 4615 2800
Wire Wire Line
	1585 2100 2800 2100
Wire Wire Line
	1585 2200 2700 2200
Wire Wire Line
	1585 2300 2600 2300
Wire Wire Line
	1585 2400 2500 2400
Wire Wire Line
	4100 5400 4100 6900
Wire Wire Line
	4200 5500 4200 7000
Wire Wire Line
	4300 5600 4300 7100
Wire Wire Line
	4400 5700 4400 7200
Wire Wire Line
	2300 3600 2300 4800
Wire Wire Line
	2400 3700 2400 4900
Wire Wire Line
	2500 3800 2500 5000
Wire Wire Line
	2600 3900 2600 5100
Wire Wire Line
	2700 4000 2700 5200
Wire Wire Line
	2800 4100 2800 5300
Wire Wire Line
	2900 4200 2900 5400
Wire Wire Line
	3000 4300 3000 5500
Wire Wire Line
	3100 4400 3100 5600
Wire Wire Line
	3200 4500 3200 5700
Wire Wire Line
	3300 4600 3300 5800
Wire Wire Line
	3400 4700 3400 5900
Wire Wire Line
	3500 4800 3500 6000
Wire Wire Line
	3600 4900 3600 6100
Wire Wire Line
	3700 5000 3700 6200
Wire Wire Line
	3800 5100 3800 6300
Wire Wire Line
	3900 5200 3900 6400
Wire Wire Line
	1795 3100 1795 3590
Wire Wire Line
	1885 3200 1885 3690
Wire Wire Line
	1970 3300 1970 3790
Wire Wire Line
	2060 3400 2060 3890
Wire Wire Line
	4300 5600 4615 5600
Wire Wire Line
	4200 5500 4615 5500
Wire Wire Line
	4100 5400 4615 5400
Wire Wire Line
	3800 5100 4615 5100
Wire Wire Line
	3700 5000 4615 5000
Wire Wire Line
	3600 4900 4615 4900
Wire Wire Line
	3500 4800 4615 4800
Wire Wire Line
	3400 4700 4615 4700
Wire Wire Line
	3300 4600 4615 4600
Wire Wire Line
	3200 4500 4615 4500
Wire Wire Line
	3100 4400 4615 4400
Wire Wire Line
	3000 4300 4615 4300
Wire Wire Line
	2900 4200 4615 4200
Wire Wire Line
	2800 4100 4615 4100
Wire Wire Line
	2700 4000 4615 4000
Wire Wire Line
	2600 3900 4615 3900
Wire Wire Line
	2500 3800 4615 3800
Wire Wire Line
	2400 3700 4615 3700
Wire Wire Line
	2300 3600 4615 3600
Wire Wire Line
	1970 3300 4615 3300
Wire Wire Line
	1885 3200 4615 3200
Wire Wire Line
	1795 3100 4615 3100
Wire Wire Line
	2400 2500 2400 2900
Wire Wire Line
	2400 2900 4615 2900
Wire Wire Line
	1585 2500 2400 2500
$Sheet
S 10485 6620 735  150 
U 5CFC3F47
F0 "CHANGELOG" 50
F1 "changelog.sch" 50
$EndSheet
Wire Wire Line
	7500 6300 6200 6300
Wire Wire Line
	7500 5700 7500 6300
Wire Wire Line
	7200 5700 7500 5700
Wire Wire Line
	7200 1400 8500 1400
Wire Wire Line
	8500 1400 8500 1100
Wire Wire Line
	8500 1100 10115 1100
$EndSCHEMATC
